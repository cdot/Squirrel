<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- meta name="cache-control" content="public">
    <meta name="expires" content="Wed, 1 Jan 2025 12:00:00 GMT" -->
    <!-- for ios 7 style, multi-resolution icon of 152x152 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
    <link rel="apple-touch-icon" href="images/squirrel.svg">
    <!-- for Chrome on Android, multi-resolution icon of 196x196 -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" sizes="196x196" href="images/squirrel.svg">
    <title>Squirrel</title>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />

    <script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.ui-contextmenu/1.18.1/jquery.ui-contextmenu.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-touch-events/1.0.9/jquery.mobile-events.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.0/js.cookie.min.js"></script>
    
    <!-- ZeroClipboard doesn't work when served from CDN -->
    <!--script class="compressable" src="libs/ZeroClipboard.js"></script-->
    <!--script class="compressable" src="js/ZeroClipboardShim.js"></script-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

    <script class="compressable" src="libs/aes.js"></script>
    <script class="compressable" src="js/Utils.js"></script>
    <script class="compressable" src="js/RGBA.js"></script>
    <script class="compressable" src="js/Translation.js"></script>
    <script class="compressable" src="js/AbstractStore.js"></script>
    <script class="compressable" src="js/LocalStorageStore.js"></script>
    <script class="compressable" src="js/AES.js"></script>
    <script class="compressable" src="js/EncryptedStore.js"></script>
    <script class="compressable" src="js/Hoard.js"></script>

    <script class="compressable" src="js/edit_in_place.js"></script>
    <script class="compressable" src="js/scroll_into_view.js"></script>
    <script class="compressable" src="js/Squirrel.js"></script>
    <script class="compressable" src="js/Tree.js",></script>
    <script class="compressable" src="js/Dialogs.js"></script>

    <link href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet">
    <link class="compressable" href="css/Icons.css" rel="stylesheet">
    <link class="compressable" href="css/Tree.css" rel="stylesheet">
    <link class="compressable" href="css/Dialogs.css" rel="stylesheet">
    <link class="compressable" href="css/Squirrel.css" rel="stylesheet">
  </head>
  <body>
    <div id="unauthenticated">
      <h1>Squirrel</h1>
      <div id="authmessage" class="TX_text">Authenticating...</div>
      <div class="authfailed TX_text">Authentication failed. Refresh the browser to try again.</div>
      <div id="splash"><img id="splash" src="images/squirrel.svg" /></div>
    </div>
    
    <div id="authenticated">
      <span id="search_label" class="TX_text">Search:</span>
      <input id="search_input" value="" class="TX_title" title="Enter search string" />
      <button id="search_button" class="TX_title TX_text" title="Search" data-icon="ui-icon-squirrel-search">Search</button>

      <span id="search_hits"></span>
      <button id="extras_button" class="TX_title TX_text" title="Tools/Options" data-icon="ui-icon-squirrel-gear">Tools/Options</button>
      <div id="toolbar">
        <button id="undo_button" class="TX_title TX_text" title="Undo last change" data-icon="ui-icon-squirrel-undo">Undo</button>
        <button id="save_button" class="TX_text" data-icon="ui-icon-squirrel-save">Save</button>
        <button id="help_button" data-icon="ui-icon-info">Help</button>
      </div>
      <div id="sites-node">
        <div class="tree-title noselect">
          <button class="tree-open-close" data-icon="ui-icon-squirrel-folder-open"></button>
          <div class="tree-info">
            <span id="whoami" class="tree-key"></span>
          </div>
        </div>
      </div>
    </div>

    <div id="help">
      <h2>
        <div class="logo" style="float:right"></div>
        <span class="TX_text">Squirrel how-to...</span>
      </h2>
      <button id="closehelp_button" class="TX_text">Close</button>
      
      <div class="twisted">
        <h3 class="TX_text twisted-title">Make the text bigger</h3>
        <p class="TX_html"> Click (or tap) on
        <button data-icon="ui-icon-squirrel-gear"></button>
        and use the buttons in the dialog</p>
      </div>
      
      <div class="twisted">
        <h3 class="TX_text twisted-title">Add a new folder</h3>
        <p class="TX_html">
          You add new top-level folders by right-clicking (long press on
          mobile devices) on the top
          <button data-icon="ui-icon-squirrel-folder-closed"></button>
          and selecting
          <span class="ui-menu-item-wrapper ui-state-active">
            <span class="ui-icon ui-icon-squirrel-add-folder squirrel-icon">
            </span>
            Add new folder
          </span>
          &nbsp;
          from the pop-up menu. Enter a
          name for the folder, OK, and then click on the
          <button data-icon="ui-icon-squirrel-folder-closed"></button>
          to the left of the name of the new folder to open it. When it's
          open the icon will change to
          <button data-icon="ui-icon-squirrel-folder-open"></button>
          You can
          now use the pop-up menu to add sub-folders and values
        </p>
      </div>
      
      <div class="twisted">
        <h3 class="TX_text twisted-title">Edit a name or value</h3>
        <p class="TX_text">
          Double-click (or double-tap) on a name or a value to edit it
        </p>
      </div>
      
      <div class="twisted">
        <h3 class="TX_text twisted-title">Copy a value</h3>
        <p class="TX_html">
          Values can be copied using the pop-up menu
          <span class="ui-menu-item-wrapper ui-state-active">
            <span class="ui-icon ui-icon-squirrel-copy squirrel-icon">
            </span>
            Copy value
          </span>
          &nbsp;
          on systems that support it. Otherwise you can edit the value
          by double-clicking (or double-tapping) and use the standard
          editing controls.
        </p>
      </div>
      
      <div class="twisted">
        <h3 class="TX_text twisted-title">Search</h3>
        <p class="TX_text">
          Search by entering the text you want to search for into the "Search:"
          at the top. Then click the magnifying glass. All currently open
          folders will be closed, and then those containing matching text will
          be opened. Both keys and values are searched, and case doesn't matter.
        </p>
      </div>

      <div class="twisted">
        <h3 class="TX_text twisted-title">Move to another folder</h3>
        <p class="TX_text">
          Press and hold the left mouse button over the folder or value you
          want to move, and drag it to its new home. Each potential new
          folder will be outlined with a green box as you drag.
        </p>
      </div>

      <div class="twisted">
        <h3 class="TX_text twisted-title">Export my data</h3>
        <p class="TX_html">
          Export a single folder in JSON format by
          selecting
          <span class="ui-menu-item-wrapper ui-state-active">
            <span class="ui-icon ui-icon-squirrel-copy squirrel-icon">
            </span>
            Copy value
          </span>
          &nbsp;
          The JSON data will be copied to the clipboard
          (on systems that support it)
        </p>
        <p class="TX_html">
          Alternatively you can export the entire database
          using the "Raw JSON" editor in the
          <button data-icon="ui-icon-squirrel-gear"></button>
          dialog
        </p>
      </div>

      <button id="decanter">Decant</button>
    </div>
    
    <!--textarea id="pasteboard"></textarea ZeroClipboard-->

    <!-- Dialogs -->    
    <div id="extras_dlg" class="dlg-dialog TX_title" title="Extras">
      <table>
        <tr>
          <td class="TX_text">Autosave</td>
          <td>
            <input type="checkbox" data-id="autosave" />
            <div class="twisted TX_text" data-open="ui-icon-info">
              Enable to automatically save whenever anything changes
            </div>
          </td>
        </tr>
        <tr>
          <td class="TX_text">Hide Values</td>
          <td>
            <input type="checkbox" data-id="hidevalues" />
            <div class="twisted TX_text" data-open="ui-icon-info">
              Enable to hide values until they hovered over. This preference
              will be stored in a cookie in this browser
            </div>
          </td>
        </tr>
        <tr>
          <td class="TX_text">Text size</td>
          <td>
            <button data-id="bigger" style="font-size:larger" title="Larger" class="TX_text TX_title">Aa</button>
            <button data-id="smaller" style="font-size:smaller" title="Smaller" class="TX_title TX_text">Aa</button>
            <span class="twisted TX_text" data-open="ui-icon-info">
              Your chosen text size will be stored in a cookie in this browser
            </span>
          </td>
        </tr>
        <tr>
          <td class="TX_text">Colour scheme</td>
          <td>
            <select data-id="theme">
              <option value="base">Base</option>
              <option value="ui-lightness">UI Lightness</option>
              <option value="ui-darkness">UI Darkness</option>
              <option value="smoothness">Smoothness</option>
              <option value="start">Start</option>
              <option value="redmond">Redmond</option>
              <option value="sunny">Sunny</option>
              <option value="overcast">Overcast</option>
              <option value="le-frog">Le Frog</option>
              <option value="flick">Flick</option>
              <option value="pepper-grinder">Pepper Grinder</option>
              <option value="eggplant">Eggplant</option>
              <option value="dark-hive">Dark Hive</option>
              <option value="cupertino">Cupertino</option>
              <option value="south-street">South Street</option>
              <option value="blitzer">Blitzer</option>
              <option value="humanity">Humanity</option>
              <option value="hot-sneaks">Hot Sneaks</option>
              <option value="excite-bike">Excite Bike</option>
              <option value="vader">Vader</option>
              <option value="dot-luv">Dot Luv</option>
              <option value="mint-choc">Mint Choc</option>
              <option value="black-tie">Black Tie</option>
              <option value="trontastic">Trontastic</option>
              <option value="swanky-purse">Swanky Purse</option>
            </select>
            <div class="twisted TX_text" data-open="ui-icon-info">
              Select your preferred colour scheme. It will be remembered
              in a cookie in this browser
            </div>
          </td>
        </tr>
        <tr>
          <td class="TX_text">Cloud Store</td>
          <td>
            <button data-id="chss" class="TX_text">Settings</button>
          </td>
        </tr>
        <tr>
          <td class="TX_text">Master password</td>
          <td>
            <button data-id="chpw" class="TX_text">Change</button>
          </td>
        </tr>
        <tr>
          <td class="TX_text">Raw JSON</td>
          <td>
            <button data-id="json" class="TX_text">View/Edit</button>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <button data-id="about" class="TX_text">About Squirrel</button>
          </td>
        </tr>
      </table>
    </div>

    <div id="login_dlg" class="dlg-dialog TX_title" title="Security details">
      <p data-id="foruser"></p>
      <table width="100%">
        <tbody>
          <tr data-id="uReq">
	    <td class="TX_text">User:</td>
	    <td>
	      <input size="25" data-id="user" value="" class="TX_title" title="Enter username" />
	    </td>
          </tr>
          <tr data-id="pReq">
	    <td class="TX_text">Pass:</td>
	    <td>
	      <input type="password" size="25" data-id="pass" class="TX_title" title="Enter password" value="" />
	    </td>
          </tr>
        </tbody>
      </table>
      <p>
        <button data-id="signin" class="TX_text">Sign In</button>
      </p>
    </div>
    
    <div id="squeak_dlg" class="dlg-dialog TX_title" title="Alert">
      <p class="messages"></p>
      <button data-id="close" class="TX_text">OK</button>
    </div>

    <div id="randomise_dlg" class="dlg-dialog TX_title" title="Generate random value">
      <span class="TX_text">Suggested value for</span>
      '<span data-id="key"></span>': '<span data-id="idea" class="dlg-value"></span>'
      <table>
        <tr>
          <td class="TX_text">Length</td>
          <td>
            <input data-id="len" size="4" value="20" class="TX_title" title="Enter password length" />
          </td>
        </tr>
        <tr>
          <td class="TX_text">Characters</td>
          <td>    
            <input data-id="chs" size="30" value="A-Za-z0-9!%^&*_$+-=;:@#~,./?" class="TX_title" title="Enter the characters that are legal in passwords for this site. You can use character ranges like A-Z or 0-9" />
        <button data-id="remember" class="TX_text TX_title" title="Remember constraints on this value">Remember</button>
          </td>
        </tr>
      </table>
      <div>
        <button data-id="use" class="TX_text">Use this</button>
        <button data-id="again" class="TX_text">Try again</button>
        <button data-id="cancel" class="TX_text">Cancel</button>
      </div>
    </div>
    
    <div id="delete_dlg" class="dlg-dialog TX_title" title="Delete entry">
      <p>
        <span class="TX_text">Are you sure you want to delete</span> '<span data-id="path"></span>'
        <span data-id="coll" class="TX_text"> and everything under it?</span>
      </p>
      <div>
        <button data-id="cancel" class="TX_text">Cancel</button>
        <button data-id="ok" class="TX_text">Delete</button>
      </div>
    </div>
    
    <div id="chpw_dlg" class="dlg-dialog TX_title" title="Change Password">
      <p class="dlg-warning TX_text">
        You must ensure that all clients up to date and you
        are safely connected to the internet before doing this,
        or you will lose data. Changing the master password will
        overwrite all data in the cloud with what you can currently
        see in the browser.
      </p>
      <table>
        <tr>
          <td>
            <label for="chpw_pass" class="TX_text">New password</label>
          </td>
          <td>
            <input type="password" size="50" data-id="pass" class="TX_title" title="Enter new password" value="" />
          </td>
        </tr>
        <tr>
          <td>
            <label for="chpw_conf" class="TX_text">
              Confirm new password
            </label>
          </td>
          <td>
            <input type="password" size="50" data-id="conf" class="TX_title" title="Re-enter new password" value="" />
          </td>
        </tr>
      </table>
      <p>
        <input type="checkbox" data-id="show">
        <label for="chpw_show" class="TX_text">
          Show password
        </label>
      </p>
      <div>
        <button data-id="set" class="TX_title TX_text" title="Set new master password">Set new password</button>
      </div>
    </div>
    
    <div id="alarm_dlg" class="dlg-dialog TX_title" title="Reminder">
      <p>
        <span class="TX_text">Select when you want to be reminded about</span>
        '<span data-id="path"></span>'
      </p>
      <p>
        <span data-id="lastmod" class="TX_text dlg-template">
          It was last modified on $1. The reminder will be reset whenever the
          entry is modified.
        </span>
        <span data-id="current" class="dlg-template TX_text">
          The current reminder is due in $1 on $2
        </span>
        <button data-id="clear" class="TX_title TX_text" title="Cancel current reminder">Cancel current reminder</button>
      </p>
      <p>
        <label for="alarm_number" class="TX_text">Remind after</label>
        <input data-id="number" size="3" value="6" />
        <select data-id="units">
          <option value="d" class="TX_text">days</option>
          <option value="m" selected="selected" class="TX_text">months</option>
          <option value="y" class="TX_text">years</option>
        </select>
      </p>
      <p>
        <span data-id="nextmod" class="dlg-template TX_text">
          New reminder will be due in $1 on $2
        </span>
      </p>
      <div>
        <button id="wtf" data-id="remind" class="TX_title TX_text" title="Set (or reset) reminder">Set reminder</button>
      </div>
    </div>
    
    <div id="insert_dlg" class="dlg-dialog TX_title" title="Insert copy">
      <p class="TX_text">Insert copy from clipboard</p>
      <p>
        <span class="TX_text">New name:</span>
        <input data-id="key" type="text" value="" />
      </p>
      <button data-id="ok" class="TX_text TX_title" title="Insert copy" >OK</button>
      <button data-id="cancel" class="TX_text TX_title" title="Cancel insert">Cancel</button>
    </div>
    
    <div id="add_dlg" class="dlg-dialog TX_title" title="Add">
      <p>
        <span data-id="folder_help" class="TX_text">
          Enter the name for the new folder
        </span>
        <span data-id="value_help" class="TX_text">
          Enter the name and value for the new entry
        </span>
      </p>
      <table>
        <tbody>
          <tr>
            <td data-id="path"></td>
            <td>
              <input data-id="key" type="text" value="" />
            </td>
          </tr>
          <tr data-id="value_parts">
            <th class="TX-text">Value:</th>
            <td>
              <input class="TX_title" data-id="value" type="text" value="" title="Enter value"/>
            </td>
          </tr>
      </table>
      <button data-id="ok" class="TX_text TX_title" title="Add new entry" >OK</button>
      <button data-id="cancel" class="TX_text TX_title" title="Cancel add">Cancel</button>
    </div>

    <div id="pick_dlg" class="dlg-dialog TX_title" title="Pick characters">
      <p class="TX_text">
        Click on the Nth character position to see what character it is
      </p>
      <table>
        <tbody>
          <tr data-id="which"></tr>
          <tr data-id="from"></tr>
        </tbody>
      </table>
      <p>
        <button data-id="clear" class="TX_text">Clear</button>
      </p>
    </div>

    <div id="store_settings_dlg" class="dlg-dialog TX_title" title="Store settings">
      <p data-id="message" class="dlg-template dlg-pick-template">
        <span data-id="cui" class="dlg-template TX_text">
          Cannot use this image because of this error: $1
        </span>
        <span data-id="mnbe" class="dlg-template TX_text">
          Store path may not be empty
        </span>
        <span data-id="xbyy" class="dlg-template">
          $1 x $2
        </span>
      </p>
      <div class="using_steganography">
        <div class="twisted" data-open="ui-icon-info">
          <p class="TX_text twisted-body">
            Choose a local image that will be copied and used to hide
            your data in the cloud. This should be a complex colour
            image of at least 1024x768 pixels, preferably with
            variable transparency. Note that very large images may
            take a long time to load and save.
          </p>
        </div>
        <input type="file" data-id="file" class="dlg-hidden" />
        <button data-id="choose_image" class="TX_title TX_text" title="Choose an image file">
          Choose Image File
        </button>
        <p><img id="stegamage" data-id="steg_image" src="images/GCHQ.png" /></p>
      </div>
      <div class="twisted" data-open="ui-icon-info">
        <p class="TX_text twisted-body">
          Set the pathname of the image on your cloud store. For example
          if you choose 'photos/stills/grandma.png' it will use the file
          'grandma.png' in the directory 'photos/stills'.
        </p>
      </div>
      <p>
        <label for="store_settings_storepath" class="TX_text">
          Store path:
        </label>
        <input data-id="storepath" type="text" value="" class="TX_title" title="Pathname of the image in your cloud store"/>
      </p>
      <p>
        <button data-id="ok" class="TX_text">OK</button>
      </p>
    </div>
    
    <div id="about_dlg" class="dlg-dialog TX_title" title="About Squirrel">
      <p class="TX_html">
        Squirrel is Copyright &copy; 2015-2017 Crawford Currie <a href="http://c-dot.co.uk">http://c-dot.co.uk</a>
      </p>
      <div class="twisted" data-open="ui-icon-info">
        <p class="TX_html">
          Licensed under the MIT License. Reuse within proprietary software is
          permitted provided all copies of the licensed software include a
          copy of the MIT License terms and the copyright notice.
        </p>
      </div>
    </div>
    
    <div id="json_dlg" class="dlg-dialog TX_title" title="Database JSON">
      <div class="twisted" data-open="ui-icon-info">
        <p class="TX_html">
          This dialog lets you access the raw
          <a href="https://www.json.org/">JSON</a> of the database. It
          can be used for:
        </p>
        <ul>
          <li class="TX_text">Making a plain-text copy of the database e.g.
            for backup</li>
          <li class="TX_text">Making specific edits</li>
          <li class="TX_text">Bulk adding new top-level folders and values</li>
        </ul>
        <p class="TX_text dlg-warning">
          Plain text versions of the database must be secured
          carefully to prevent loss of sensitive data.
        </p>
        <p class="TX_text">
          Note that the loading the JSON will only load folders that are
          not already in the database.
        </p>
      </div>
      <textarea data-id="text">
      </textarea>
      <div>
        <button data-id="ok" class="TX_text">Load this JSON</button>
      </div>
    </div>
  </body>
</html>
