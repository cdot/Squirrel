/*@preserve Copyright (C) 2015 Crawford Currie http://c-dot.co.uk license MIT*/
function StegaStore(t){"use strict";LayeredStore.call(this,t)}StegaStore.prototype=Object.create(LayeredStore.prototype),StegaStore.prototype.options=function(){"use strict";return $.extend(LayeredStore.prototype.options.call(this),{needs_image:!0})},StegaStore.prototype.read=function(t,e,a){"use strict";DEBUG&&console.debug("StegaStore: reading "+t);var r=this,o=function(){var t,o=new Steganographer($("#stegamage")[0]);try{t=o.extract()}catch(t){return DEBUG&&console.debug("Caught "+t),void a.call(r,t)}e.call(r,t)};this.engine.read(t,function(t){var e="data:image/png;base64,"+Utils.ArrayBufferToBase64(t);e!==$("#stegamage").attr("src")?$("#stegamage").attr("src",e).on("load",function(){$(this).off("load"),o()}):o()},a)},StegaStore.prototype.write=function(t,e,a,r){"use strict";DEBUG&&console.debug("StegaStore: writing "+t);var o=this,n=document.getElementById("stegamage");if(!n)throw"no #stegamage";var i,g=new Steganographer(n);try{var s=g.inject(e,!0),c=s.toDataURL(),u=c.split(",",2)[1];i=Utils.Base64ToArrayBuffer(u)}catch(t){return DEBUG&&console.debug("Caught "+t),void r.call(this,t)}o.engine.write(t,i,function(){a.call(o)},r)};
//# sourceMappingURL=release/StegaStore.map