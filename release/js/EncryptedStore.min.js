/*@preserve Copyright (C) 2015 Crawford Currie http://c-dot.co.uk license MIT*/
function EncryptedStore(t){"use strict";LayeredStore.call(this,t)}EncryptedStore.prototype=Object.create(LayeredStore.prototype),EncryptedStore.prototype.options=function(){"use strict";return $.extend(LayeredStore.prototype.options.call(this),{needs_pass:!0})},EncryptedStore.prototype.read=function(t,e,r){"use strict";var n=this;this.engine.read(t,function(t){var o;try{o=AES.decrypt(t,n.engine.pass(),256)}catch(t){return void r.call(n,t)}e.call(n,o.buffer)},r)},EncryptedStore.prototype.write=function(t,e,r,n){"use strict";var c,o=this;try{c=AES.encrypt(e,this.engine.pass(),256)}catch(t){return void n.call(this,t)}this.engine.write(t,c.buffer,function(){r.call(o)},n)};