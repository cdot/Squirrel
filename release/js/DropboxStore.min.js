/*@preserve Copyright (C) 2015 Crawford Currie http://c-dot.co.uk license MIT*/
function DropboxStore(t){"use strict";var e=this;new Dropbox.Client({key:APP_KEY}).authenticate(function(o,r){o?(DEBUG&&console.debug("Dropbox auth failed: "+o),t.fail(e,o.responseText)):(DEBUG&&console.debug("Dropbox auth OK"),r.getAccountInfo(null,function(n,s){if(n){var a=n.responseText||"Status: "+o.status;DEBUG&&console.debug("Dropbox getAccountInfo failed "+a),t.fail.call(e,a)}else DEBUG&&console.debug("Dropbox username "+s.name),e.db_client=r,e.user(s.name),AbstractStore.call(e,t)}))})}const APP_KEY="37tzcd7ezkaqovy";SQUIRREL_STORE=DropboxStore,DropboxStore.prototype=Object.create(AbstractStore.prototype),DropboxStore.prototype.options=function(){"use strict";return $.extend(AbstractStore.prototype.options(),{needs_path:!0,identifier:"Dropbox"})},DropboxStore.prototype.write=function(t,e,o,r){"use strict";var n=this;this.db_client.writeFile(t,e,function(t){t?(DEBUG&&console.debug("Dropbox write failed "+t.responseText),r.call(n,t.responseText||t.status)):o.call(n,n.data)})},DropboxStore.prototype.read=function(t,e,o){"use strict";var r=this;this.db_client.readFile(t,{arrayBuffer:!0},function(t,n){t?(DEBUG&&console.debug("Dropbox read failed "+t.responseText),t.status===Dropbox.ApiError.NOT_FOUND?o.call(r,AbstractStore.NODATA):o.call(r,t.responseText)):e.call(r,n)})};
//# sourceMappingURL=release/DropboxStore.map