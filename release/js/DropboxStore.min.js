/*@preserve Copyright (C) 2015 Crawford Currie http://c-dot.co.uk license MIT*/
function DropboxStore(t){"use strict";var e=this;new Dropbox.Client({key:APP_KEY}).authenticate(function(o,r){o?t.fail(e,o.responseText):r.getAccountInfo(null,function(s,n){if(s){var i=s.responseText||"Status: "+o.status;t.fail.call(e,i)}else e.db_client=r,e.user(n.name),AbstractStore.call(e,t)})})}const APP_KEY="37tzcd7ezkaqovy";SQUIRREL_STORE=DropboxStore,DropboxStore.prototype=Object.create(AbstractStore.prototype),DropboxStore.prototype.options=function(){"use strict";return $.extend(AbstractStore.prototype.options(),{needs_path:!0,identifier:"Dropbox"})},DropboxStore.prototype.write=function(t,e,o,r){"use strict";var s=this;this.db_client.writeFile(t,e,function(t){t?r.call(s,t.responseText||t.status):o.call(s,s.data)})},DropboxStore.prototype.read=function(t,e,o){"use strict";var r=this;this.db_client.readFile(t,{arrayBuffer:!0},function(t,s){t?t.status===Dropbox.ApiError.NOT_FOUND?o.call(r,AbstractStore.NODATA):o.call(r,t.responseText):e.call(r,s)})};