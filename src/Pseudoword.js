/*@preserve Copyright (C) 2019 Crawford Currie http://c-dot.co.uk license MIT*/
    
class Pseudoword {
    /**
     * Generate a pseudoword 
     * @param len length of word to generate
     */
    getWord(len) {
        if (!len || len <= 0)
            len = 5;
        
        let cStreak = 0, vStreak = 0;
        let ch1 = Math.floor(Math.random() * 26);
        let str = "";
        while (str.length < len) {
            let ch = String.fromCharCode(ch1 + Pseudoword.ORDA), c, v;
            if (/[aeiouy]/.test(ch))
                c = 0, v = vStreak + 1;
            else
                c = cStreak + 1, v = 0;
        
            if (c < 3 && v < 3)
                str += ch;
            cStreak = c; vStreak = v;
            let row = Pseudoword.MATRIX[ch1];
            do {
                ch1 = Math.floor(Math.random() * 26);
            } while (row[ch1] < Math.random() * 99);
        }
        return str;
    }
}

 // Matrix of character transition probabilities, derived from analysis of
 // /usr/share/dict/british-english. Each row corresponds to a character
 // 'a'..'z', and each column is a character 'a'..'z' that might follow it.
 // Values represent the probability of that transition.
 Pseudoword.MATRIX = [
 [0.0410761963442185,4.22571369891148,6.16399671390429,4.22828096118299,
     0.510885192031218,0.985828712261245,3.21934688847813,0.313205997124666,
     3.49404395153009,0.082152392688437,1.30416923392894,11.6630724994865,
     4.05884165126309,12.885089340727,0.0693160813308688,3.64807968782091,
     0.107825015403574,11.8581844321216,6.69542000410762,17.2751078250154,
     1.95111932635038,1.60710618196755,1.0705483672212,0.364551242554939,
     1.62507701786815,0.551961388375436], //a
 [13.9438190852855,4.00567893722746,0.273805902038333,0.375215495385864,
     13.9742419632897,0.111550552682284,0.0405638373390123,0.141973430686543,
     11.3173106175844,0.446202210729135,0.0202819186695061,19.135990264679,
     0.314369739377345,0.273805902038333,11.9359091370044,0.0912686340127776,
     0,8.9240442145827,3.83328262853666,0.750430990771727,8.73136598722239,
     0.162255349356049,0.111550552682284,0,1.08508264881858,0], //b
 [14.3475301439129,0,1.68222481524699,0.0194476857253987,11.026837806301,0,0,
     12.3444185141968,7.44846363282769,0,8.35278101905873,4.22500972384286,
     0.0194476857253987,0.0340334500194477,18.2127576818359,0,
     0.179891092959938,6.38856476079347,1.29327110073901,8.0270322831583,
     5.1682224815247,0,0,0,1.20575651497472,0.0243096071567483], //c
 [5.98181408281356,0.653791237694447,0.458405350567371,3.05854061772,
     30.8333959570151,0.428345983317051,2.0139776057714,0.405801457879312,
     23.2809799353724,0.46592019237995,0.0601187345006388,4.15570752235665,
     0.804088073946043,0.646276395881867,7.04140677838731,0.345682723378673,
     0.0300593672503194,4.89216201998948,7.16915908920117,0.232960096189975,
     4.23085594048245,0.676335763132186,0.721424814007665,0,1.38273089351469,
     0.0300593672503194], //d
 [4.85629878182216,0.74768400320957,3.67824057188708,14.1221095630608,
     2.66248449923408,1.40965788897804,1.20905974177548,0.406667152965205,
     0.897220803851484,0.125829746881611,0.202421766722591,4.81982639142169,
     2.77554890947553,10.3745714494128,0.716682471369174,1.94033116930484,
     0.353782186884528,19.3467794879276,20.1455248376979,4.25085710117441,
     0.406667152965205,1.28747538113648,0.860748413451018,1.68502443650157,
     0.59449996352761,0.124006127361587], //e
 [9.21665297178855,0.178033415502602,0.0273897562311695,0.0136948781155848,
     12.1747466447549,9.3536017529444,0.0821692686935086,0.123253903040263,
     18.8852369213914,0.0273897562311695,0,10.9559024924678,0,
     0.0821692686935086,12.5582032319912,0.0410846343467543,0,
     7.84716516023007,1.80772391125719,3.98520953163517,10.1342098055327,
     0,0.0136948781155848,0,2.49246781703643,0], //f
 [10.9072478459199,0.233147491130258,0.020273694880892,0.0709579320831221,
     19.908768373036,0.141915864166244,5.29143436391282,7.60263558033452,
     11.0897110998479,0.020273694880892,0.0405473897617841,7.6431829700963,
     0.94272681196148,3.97364419665484,5.89964521033958,0.141915864166244,0,
     11.7080587937152,5.98073998986315,0.375063355296503,5.95032944754181,0,
     0.20273694880892,0,1.79422199695895,0.0608210846426761], //g
 [16.4496292277084,0.669198770121179,0.162778079218665,0.207994212334961,
     25.5199855308374,0.406945198046663,0.0452161331162959,0.180864532465184,
     16.7299692530295,0.0633025863628143,0.0361729064930367,1.45595948634473,
     1.07614396816784,0.777717489600289,17.0193525049738,0.171821305841924,
     0.0180864532465184,3.45451257008501,2.2155905226985,4.76578043045759,
     4.5849158979924,0,0.633025863628143,0,3.35503707722916,0], //h
 [3.46555232240138,1.38709606843591,7.27678473756755,2.92296584768197,
     7.7274815673748,1.95593672741593,2.97547421620321,0.0634476119631566,
     0.0218784868838471,0.0262541842606165,0.33911654669963,5.07580895705253,
     3.27083378913514,28.5579889294856,7.4693154221454,1.83779289824316,
     0.214409171461702,2.74137440654604,11.7159297263001,7.16082875708316,
     0.299735270308705,2.81794911063951,0.0371934277025401,0.22753626359201,
     0.00437569737676942,0.406939856039556], //i
 [22.8952772073922,0,0,0,17.0431211498973,0,0,0,8.52156057494867,0,0,0,0,0,
     22.6899383983573,0,0,0,0,0,28.8501026694045,0,0,0,0,0], //j
 [4.58459390272283,1.25669071445194,0.1629043518734,0.465441005352572,
     34.4891784966256,0.628345357225972,0.186176402141029,1.18687456364906,
     22.2248080055853,0.116360251338143,0.395624854549686,5.44565976262509,
     0.884337910169886,4.072608796835,1.7919478706074,0.744705608564114,0,
     0.9774261112404,14.6846637188736,0.558529206423086,1.23341866418431,0,
     1.00069816150803,0,2.90900628345357,0], //k
 [12.6508154843781,0.400864609943014,0.613087050501081,1.73314993122421,
     20.9196305757516,0.558066417763804,0.385144429160935,0.121831401061112,
     18.1803890744744,0.0078600903910395,0.699548044802515,11.4049911573983,
     0.62880723128316,0.345843977205738,9.00373354293574,0.6170170956966,
     0.015720180782079,0.141481627038711,4.10296718412262,2.25191589703282,
     4.00471605423462,0.573786598545883,0.106111220279033,0,10.5207309884064,
     0.0117901355865592], //l
 [18.0042238648363,5.70221752903907,0.143309699803892,0.0527983104540655,
     20.1538693618947,0.346960325841002,0,0.0829687735706743,17.2650475184794,
     0,0.00754261577915221,0.44501433096998,4.94795595112385,
     0.935284356614874,11.2460401267159,10.801025795746,0.0301704631166088,
     0.165937547141349,4.05792728918389,0.0301704631166088,4.5934530095037,
     0.0527983104540655,0.0678835420123699,0,0.867400814602504,0], //m
 [6.21257703653942,0.368022899202617,6.15416070333265,7.64377720010515,
     11.0640535093612,1.44872506352776,24.3333235972778,0.464409848993779,
     7.11218856792359,0.227823699506382,1.60060752986535,0.590004965388323,
     0.2979232993545,1.77585652948564,3.72404124193124,0.350497999240588,
     0.262873499430441,0.341735549259573,9.6795864123609,13.1407541548617,
     1.40783363028303,0.914215614685866,0.24826941612875,0.0613371498671028,
     0.470251482314455,0.105149399772176], //n
 [2.15580121243557,1.93211657535579,3.41362207021753,2.71987551463676,
     0.956332868674425,1.19298473109216,3.15103575712387,0.22692644341427,
     1.91266573734885,0.0745615456932603,1.16056666774727,6.3442149965961,
     5.82876778941226,20.7345933153953,4.820566019386,3.9517619217428,
     0.119946834376114,12.8310694719097,4.96320549810354,4.66820112166499,
     9.22618082795734,2.72311732097125,3.40389665121406,0.590008752877103,
     0.680779330242811,0.217201024410802], //o
 [11.7844215042231,0.221209277383027,0.120659605845288,0.134066228716986,
     17.9045448451535,0.120659605845288,0.0670331143584931,5.8452875720606,
     9.96782410510792,0.0134066228716986,0.087143048666041,8.37913929481164,
     0.221209277383027,0.174286097332082,11.3017830808419,5.93913393216249,
     0,14.1171738838986,4.29011931894356,3.68011797828127,4.61187826786433,
     0,0.167582785896233,0,0.851320552352862,0], //p
 [0.193798449612403,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,99.8062015503876,
     0,0,0,0,0], //q
 [14.3447790516963,1.310735125942,2.06140222267836,2.86485059965399,
     20.9512359616456,0.592323256018532,1.39870392634079,0.392927308447937,
     14.3330498783098,0.0967656804386711,1.21690173884995,1.25795384570272,
     2.47192329120605,2.07313139606486,9.98152655191625,1.12013605841128,
     0.0733073336656599,2.71237134562942,9.43611998944374,4.60663284755007,
     3.27830396152831,0.841568190481776,0.331349148168783,0.0029322933466264,
     2.23147523678269,0.0175937600797584], //r
 [4.71774620076866,0.239765875674342,5.19022601459751,0.155142625436339,
     14.1426606960262,0.356122844751596,0.172772469235923,7.63019639645993,
     9.97849159056451,0.0458375938789182,1.24819294101054,2.95123585205035,
     2.40471069426325,1.46327703536547,3.91735129226755,4.92577835760375,
     0.620570501745355,0.162194562956172,10.0631148408025,22.6331934699059,
     4.64370085681041,0.0317337188392511,1.14241387821304,0,1.16356969077254,0], //s
 [8.84610622755974,0.324996904791383,1.28760678469729,0.0804754240435805,
     22.3133589203912,0.38999628574966,0.108332301597128,5.79113532252074,
     23.9135817754117,0.0247616689364863,0.0247616689364863,2.16355082332549,
     0.405472328834963,0.346663365110808,6.7413643679584,0.182617308406587,0,
     8.4623003590442,7.45016714126532,3.80401139036771,3.66782221121704,
     0.0123808344682432,0.668565061285131,0,2.74545004333292,0.244521480747802], //t
 [3.85241758858876,3.44808221485932,4.14443758072668,3.11675183916437,
     3.87488066490706,1.30847419554108,2.84719492334475,0.0280788453978772,
     3.93665412478239,0.0449261526366036,0.269556915819621,10.0859212669175,
     6.55360251586455,15.8477003425619,0.887291514572921,3.89734374122536,
     0.0168473072387263,13.0005054192172,13.3430673330713,8.56404784635256,
     0.0561576907957545,0.224630763183018,0.0112315381591509,0.252709608580895,
     0.0842365361936317,0.303251530297074], //u
 [14.6291079812207,0,0,0,53.7464788732394,0,0,0,21.3333333333333,0,0,0,0,0,
     7.88732394366197,0,0,0.28169014084507,0.0187793427230047,0,
     1.29577464788732,0.31924882629108,0,0,0.488262910798122,0], //v
 [21.7400784997819,1.28652420409943,0.174443959877889,1.70082860880942,
     17.2263410379416,0.457915394679459,0.218054949847362,7.2394243349324,
     16.7030091583079,0,0.719581334496293,2.96554731792412,0.414304404709987,
     5.53859572612298,11.8403837767117,0.501526384648932,0,4.44832097688618,
     5.56040122110772,0.479720889664195,0.239860444832098,0,0.130832969908417,
     0,0.28347143480157,0.130832969908417], //w
 [6.78353658536585,0.152439024390244,9.375,0,16.6920731707317,
     0.152439024390244,0.152439024390244,3.65853658536585,18.0640243902439,
     0,0,0.304878048780488,0,0.0762195121951219,3.04878048780488,
     18.8262195121951,0.152439024390244,0,0.152439024390244,16.1585365853659,
     3.58231707317073,0,0.38109756097561,0,2.28658536585366,0], //x
 [6.11748348974626,2.88494960027807,5.49183176920403,2.67639902676399,
     10.2189781021898,1.04275286757039,1.84219673270768,1.14702815432742,
     12.1654501216545,0.24330900243309,0.24330900243309,4.97045533541884,
     6.81265206812652,5.24852276677094,4.13625304136253,8.34202294056309,0,
     3.82342718109141,15.7108098713938,3.09350017379214,1.00799443865137,0,
     2.22453945081682,0.521376433785193,0.0347584289190129,0], //y
 [9.33333333333333,0,0,0,29.6190476190476,0,0,0.571428571428571,
     20.0952380952381,0,0.19047619047619,6.66666666666667,0.285714285714286,
     0.0952380952380952,10.1904761904762,0.476190476190476,0,
     0.0952380952380952,0.0952380952380952,0.380952380952381,1.52380952380952,
     0.380952380952381,0.476190476190476,0,3.42857142857143,16.0952380952381] //z
 ];

 Pseudoword.ORDA = 'a'.charCodeAt(0);

if (typeof module !== "undefined")
    module.exports = Pseudoword;
