$.ajaxTransport("+binary",function(options,originalOptions,jqXHR){"use strict";return window.FormData&&(options.dataType&&"binary"===options.dataType||options.data&&(window.ArrayBuffer&&options.data instanceof ArrayBuffer||window.Blob&&options.data instanceof Blob))?{send:function(headers,callback){var xhr=new XMLHttpRequest,url=options.url,type=options.type,async=options.async||!0,dataType=options.responseType||"blob",data=options.data||null,username=options.username||null,password=options.password||null;xhr.addEventListener("load",function(){var data2={};data2[options.dataType]=xhr.response,callback(xhr.status,xhr.statusText,data2,xhr.getAllResponseHeaders())}),xhr.open(type,url,async,username,password);for(var i in headers)xhr.setRequestHeader(i,headers[i]);xhr.responseType=dataType,xhr.send(data)},abort:function(){jqXHR.abort()}}:void 0}),$.fn.linger=function(){"use strict";var eventType={mousedown:"ontouchstart"in window?"touchstart":"mousedown",mouseup:"ontouchend"in window?"touchend":"mouseup"};return this.each(function(){var timeout;$(this).on(eventType.mousedown+".linger",function(e){return timeout=window.setTimeout(function(){$(e.currentTarget).trigger("taphold")},1e3),!1}).on(eventType.mouseup+".linger",function(){window.clearTimeout(timeout)}).on(eventType.click+".linger",function(){window.clearTimeout(timeout)}).on("contextmenu.linger",function(){window.clearTimeout(timeout)})})},$.fn.file_input=function(){"use strict";return this.each(function(){var $self=$(this).wrap($("<div></div>"));$self.hide(),$self.parent().append($("<button></button>").button({label:$self.attr("title")}).click(function(evt){$self.trigger(evt)}))})},$.fn.scroll_into_view=function(){"use strict";return this.each(function(){var offset=$(this).offset().top-$(window).scrollTop();return offset>window.innerHeight?($("html,body").animate({scrollTop:offset-16},500),!1):!0})},$.fn.edit_in_place=function(opts){"use strict";return this.each(function(){var $self=$(this),h=opts.height||$self.height(),w=opts.width||$self.width(),changed=opts.changed||function(){$self.text()},$input=$("<input/>"),blurb=function(){$input.remove(),$self.show()};$self.hide(),$input.insertBefore($self).addClass("in_place_editor").val($self.text()).css("height",h).css("width",w).change(function(){var val=$(this).val();blurb(),val!==$self.text()&&changed.call($self,val)}).mouseup(function(e){e.stopPropagation()}).mousedown(function(e){e.stopPropagation()}).keydown(function(e){return 27===e.keyCode||13===e.keyCode&&$(this).val()===$self.text()?(blurb(),!1):!0}).blur(blurb).select()})};var Utils={waiting_for_sometime:{},sometime_timeout:!0,last_yield:Date.now(),IMMEDIATE:1,SOON:100,SOMETIME:250};Utils.generate_password=function(constraints){"use strict";var sor,eor;"undefined"==typeof constraints.length&&(constraints.length=24),"undefined"==typeof constraints.charset&&(constraints.charset="A-Za-z0-9");for(var cs=constraints.charset,legal=[];cs.length>0;)if(cs.length>=3&&"-"===cs.charAt(1))for(sor=cs.charCodeAt(0),eor=cs.charCodeAt(2),cs=cs.substring(3);eor>=sor;)legal.push(String.fromCharCode(sor++));else legal.push(cs.charAt(0)),cs=cs.substring(1);var array=new Uint8Array(constraints.length);window.crypto.getRandomValues(array);for(var s="",i=0;i<constraints.length;i++)s+=legal[array[i]%legal.length];return s},Utils.getURLParameters=function(){"use strict";var params={},bits=location.search.split("?",2);if(bits.length<2)return params;for(var pairs=bits[1].split(/[&;]/),i=0;i<pairs.length;i++){var pair=decodeURIComponent(pairs[i].replace(/\+/g,"%20")),kv=pair.split("=",2);params[kv[0]]=kv[1]||null}},Utils.fragmentify=function(fid){"use strict";return fid.replace(/[^A-Za-z0-9:]/g,function(m){return"_"+m.charCodeAt(0)})},Utils.read_file=function(file,ok,fail,mode){"use strict";var reader=new FileReader;if(reader.onload=function(){ok(reader.result)},reader.onerror=function(){fail(file.name+" read failed")},reader.onabort=reader.onerror,"undefined"==typeof mode||"text"===mode)reader.readAsText(file);else if("arraybuffer"===mode)reader.readAsArrayBuffer(file);else if("binarystring"===mode)reader.readAsBinaryString(file);else{if("datauri"!==mode)throw"Unrecognised mode "+mode;reader.readAsDataURL(file)}},Utils.sometime=function(event){"use strict";Utils.waiting_for_sometime[event]||(Utils.waiting_for_sometime[event]=!0,null===Utils.sometime_timeout&&(Utils.sometime_timeout=window.setTimeout(Utils.sometime_is_now,Utils.SOMETIME)))},Utils.sometime_is_now=function(){"use strict";Utils.sometime_timeout=null,Utils.last_yield=Date.now();for(var event in Utils.waiting_for_sometime)$(document).triggerHandler(event),delete Utils.waiting_for_sometime[event]},Utils.soon=function(fn){"use strict";Date.now()-Utils.last_yield>Utils.SOON?window.setTimeout(function(){Utils.last_yield=Date.now(),fn()},Utils.IMMEDIATE):fn()},Utils.execute_queue=function(q){"use strict";Utils.q_ready(),Utils.q_next(q)},Utils.q_ready=function(){"use strict";Utils.qready=!0},Utils.q_next=function(q){"use strict";if(q.length>0&&Utils.qready){var fn=q.shift();Utils.qready=!1,fn(Utils.q_ready)}window.setTimeout(function(){Utils.last_yield=Date.now(),Utils.q_next(q)},Utils.IMMEDIATE)},Utils.ArrayBufferToString=function(ab){"use strict";for(var a16=new Uint16Array(ab),str="",i=0;i<a16.length;i++)str+=String.fromCharCode(a16[i]);return str},Utils.StringToArrayBuffer=function(str){"use strict";for(var a16=new Uint16Array(str.length),i=0,strLen=str.length;strLen>i;i++)a16[i]=str.charCodeAt(i);return a16.buffer},Utils.ArrayBufferToPackedString=function(ab){"use strict";for(var a8=new Uint8Array(ab),cc=0!==(1&a8.length)?256:0,high=!0,ps="",a8_len=a8.length,i=0;a8_len>i;i++)high?(ps+=String.fromCharCode(cc|a8[i]),high=!1):(cc=a8[i]<<8,high=!0);return high&&(ps+=String.fromCharCode(cc)),ps},Utils.PackedStringToArrayBuffer=function(str){"use strict";var datalen=2*str.length-1;0===(256&str.charCodeAt(0))&&datalen--;for(var high=!0,a8=new Uint8Array(datalen),i=0,j=0;datalen>j;)high?(a8[j++]|=255&str.charCodeAt(i++),high=!1):(a8[j++]=str.charCodeAt(i)>>8&255,high=!0);return a8.buffer},Utils.ArrayBufferToBase64=function(ab){"use strict";for(var a8=new Uint8Array(ab),nMod3=2,sB64Enc="",nLen=a8.length,uint6ToB64=function(nUint6){return 26>nUint6?nUint6+65:52>nUint6?nUint6+71:62>nUint6?nUint6-4:62===nUint6?43:63===nUint6?47:65},nUint24=0,nIdx=0;nLen>nIdx;nIdx++)nMod3=nIdx%3,nUint24|=a8[nIdx]<<(16>>>nMod3&24),(2===nMod3||nLen-nIdx===1)&&(sB64Enc+=String.fromCharCode(uint6ToB64(nUint24>>>18&63),uint6ToB64(nUint24>>>12&63),uint6ToB64(nUint24>>>6&63),uint6ToB64(63&nUint24)),nUint24=0);return sB64Enc.substr(0,sB64Enc.length-2+nMod3)+(2===nMod3?"":1===nMod3?"=":"==")},Utils.Base64ToArrayBuffer=function(sB64){"use strict";for(var nMod3,nMod4,sB64Enc=sB64.replace(/[^A-Za-z0-9\+\/]/g,""),nInLen=sB64Enc.length,nOutLen=3*nInLen+1>>2,ta8=new Uint8Array(nOutLen),b64ToUint6=function(nChr){return nChr>64&&91>nChr?nChr-65:nChr>96&&123>nChr?nChr-71:nChr>47&&58>nChr?nChr+4:43===nChr?62:47===nChr?63:0},nUint24=0,nOutIdx=0,nInIdx=0;nInLen>nInIdx;nInIdx++)if(nMod4=3&nInIdx,nUint24|=b64ToUint6(sB64Enc.charCodeAt(nInIdx))<<6*(3-nMod4),3===nMod4||nInLen-nInIdx===1){for(nMod3=0;3>nMod3&&nOutLen>nOutIdx;nMod3++,nOutIdx++)ta8[nOutIdx]=nUint24>>>(16>>>nMod3&24)&255;nUint24=0}return ta8.buffer};
//# sourceMappingURL=Utils.map