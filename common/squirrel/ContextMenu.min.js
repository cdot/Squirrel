Squirrel.ContextMenu={},Squirrel.ContextMenu.init=function($root){"use strict";var before_open=function(e,ui){var zc,$div=ui.target.is(".node_div")?ui.target:$div=ui.target.parents(".node_div").first(),$val=$div.children(".value"),hasalarm=ui.target.closest(".node").children(".alarm").length>0,isvalue=$val.length>0,isroot=ui.target.closest("li").is("#sites-node");$root.contextmenu("showEntry","rename",!isroot).contextmenu("showEntry","copy_value",isvalue).contextmenu("showEntry","pick_from",isvalue).contextmenu("showEntry","make_copy",!isroot).contextmenu("showEntry","delete",!isroot).contextmenu("showEntry","add_alarm",!hasalarm&&!isroot).contextmenu("showEntry","edit",isvalue).contextmenu("showEntry","randomise",isvalue).contextmenu("showEntry","add_subtree",!isvalue).contextmenu("showEntry","add_value",!isvalue&&!isroot).contextmenu("showEntry","insert_copy",!isvalue&&null!==Squirrel.clipboard),$root.data("zc_copy")||(zc=new ZeroClipboard(ui.menu.children("li[data-command='copy_value']")),zc.on("copy",function(event){event.clipboardData.setData("text/plain",$root.data("zc_copy").text())}),$root.data("ZC",zc)),$root.data("zc_copy",$val),$root.data("zc_cut")||(zc=new ZeroClipboard(ui.menu.children("li[data-command='make_copy']")),zc.on("copy",function(event){var pa=$root.data("zc_cut"),p=Squirrel.Tree.path(pa),n=Squirrel.client.hoard.get_node(p),json=JSON.stringify(n);Squirrel.clipboard=json,event.clipboardData.setData("text/plain",json)}),$root.data("ZC",zc)),$root.data("zc_cut",$div.closest(".node"))},menu={delegate:".node_div",menu:[{title:TX.tx("Copy value"),cmd:"copy_value",uiIcon:"squirrel-icon-camera"},{title:TX.tx("Pick characters"),cmd:"pick_from",uiIcon:"squirrel-icon-pick"},{title:TX.tx("Rename"),cmd:"rename",uiIcon:"squirrel-icon-pencil"},{title:TX.tx("Edit value"),cmd:"edit",uiIcon:"squirrel-icon-edit"},{title:TX.tx("Add reminder"),cmd:"add_alarm",uiIcon:"squirrel-icon-alarm"},{title:TX.tx("Generate new random value"),cmd:"randomise",uiIcon:"squirrel-icon-key"},{title:TX.tx("Add new value"),cmd:"add_value",uiIcon:"squirrel-icon-add-value"},{title:TX.tx("Add new folder"),cmd:"add_subtree",uiIcon:"squirrel-icon-add"},{title:TX.tx("Copy folder"),cmd:"make_copy",uiIcon:"squirrel-icon-copy"},{title:TX.tx("Insert copy"),cmd:"insert_copy",uiIcon:"squirrel-icon-paste"},{title:TX.tx("Delete"),cmd:"delete",uiIcon:"squirrel-icon-delete"}],beforeOpen:before_open,taphold:!0,select:Squirrel.ContextMenu.choice};$root.contextmenu(menu)},Squirrel.ContextMenu.choice=function(e,ui){"use strict";var $node=ui.target.closest("li");switch(ui.cmd){case"copy_value":break;case"make_copy":break;case"insert_copy":if(Squirrel.clipboard){var data=JSON.parse(Squirrel.clipboard);Squirrel.add_child_node($node,TX.tx("A copy"),data.data)}break;case"rename":Squirrel.edit_node($node,"key");break;case"edit":Squirrel.edit_node($node,"value");break;case"add_value":Squirrel.add_child_node($node,TX.tx("A new value"),TX.tx("None"));break;case"add_subtree":Squirrel.add_child_node($node,TX.tx("A new folder"));break;case"randomise":Squirrel.Dialog.make_random($node);break;case"add_alarm":Squirrel.Dialog.alarm($node);break;case"delete":Squirrel.Dialog.confirm_delete($node);break;case"pick_from":Squirrel.Dialog.pick_from($node)}};
//# sourceMappingURL=ContextMenu.map