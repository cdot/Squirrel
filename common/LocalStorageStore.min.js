/*@preserve Copyright (C) 2015 Crawford Currie http://c-dot.co.uk license MIT*/
function LocalStorageStore(params){"use strict";if(params.user)this.user(params.user);else{for(var key,i=0,poss_user=null;null!=(key=localStorage.key(i));){var m=/^Squirrel\.(.*)$/.exec(key);if(m){if(poss_user){poss_user=null;break}poss_user=m[1]}i++}poss_user&&(DEBUG&&console.debug("LocalStorageStore: Identified possible user "+poss_user),this.user(poss_user))}AbstractStore.call(this,params)}LocalStorageStore.prototype=Object.create(AbstractStore.prototype),LocalStorageStore.prototype.options=function(){"use strict";return $.extend(AbstractStore.prototype.options(),{needs_path:!0,identifier:"browser"})},LocalStorageStore.prototype.read=function(path,ok,fail){"use strict";var str;DEBUG&&console.debug("LocalStorageStore: Reading "+path);try{str=localStorage.getItem(path)}catch(e){return DEBUG&&console.debug("Caught "+e),void fail.call(this,e)}if(null===str)fail.call(this,AbstractStore.NODATA);else{var data=Utils.PackedStringToArrayBuffer(str);ok.call(this,data)}},LocalStorageStore.prototype.write=function(path,data,ok,fail){"use strict";DEBUG&&console.debug("LocalStorageStore: Writing "+path);try{var str=Utils.ArrayBufferToPackedString(data);localStorage.setItem(path,str)}catch(e){return DEBUG&&console.debug("Caught "+e),void fail.call(this,e)}ok.call(this)};
//# sourceMappingURL=LocalStorageStore.map