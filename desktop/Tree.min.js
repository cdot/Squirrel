/*@preserve Copyright (C) 2015 Crawford Currie http://c-dot.co.uk license MIT*/
!function($,S){"use strict";var map_treenode_icon={closed:"ui-icon-squirrel-folder-closed",open:"ui-icon-squirrel-folder-open",alarm:"ui-icon-squirrel-alarm"};$.widget("squirrel.treenode",$.squirrel.treenode,{edit:function(what){var $node=$(this.element),$span=$node.find("."+what).first(),w=$("#sites-node").width();$span.parents().each(function(){w-=$(this).position().left}),$span.edit_in_place({width:w,changed:function(s){var e=S.client.hoard.record_action({type:"key"===what?"R":"E",path:$node.treenode("get_path"),data:s},function(ea){S.Tree.action(ea,function(){Utils.sometime("update_save")},!0)});null!==e&&S.Dialog.squeak(e.message)}})},icon_button:function(action,selector,icon,on_click){var $node=$(this.element),$control="string"==typeof selector?$node.find(selector):selector;switch(action){case"create":var $button=$control.button({icons:{primary:map_treenode_icon[icon]},text:!1});on_click&&$button.on("click",on_click);break;case"change":$control.length>0&&$control.button("option","icons",{primary:map_treenode_icon[icon]});break;case"destroy":$control.remove()}return $node},attach_handlers:function(){var $node=$(this.element),$info=$node.children(".treenode-info");$info.hover(function(){return 0===$(this).find(".in_place_editor").length?($(this).addClass("hover"),$("<div></div>").addClass("lastmod").text($node.data("last-mod")).appendTo($(this)),!1):void 0},function(){$(this).removeClass("hover").find(".lastmod").remove()}),$info.children(".key").on("dblclick",function(){$node.treenode("edit","key")}),$info.children(".value").on("dblclick",function(){$node.treenode("edit","value")})}})}(jQuery,Squirrel);
//# sourceMappingURL=Tree.map